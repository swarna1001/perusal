 {% extends "accounts/base.html" %}

{% load static %}

{% block title %}
    <title>{{ user.username }}/friends</title>
{% endblock title %}

{% block cssfiles %}

    <link rel="stylesheet" type="text/css" href="{% static 'accounts/friends_style.css' %}"/>

{% endblock cssfiles %}


{% block content %}


    <!-- ############## till here COMMON TEMPLATE FOR ALL THE PAGES  ################# -->


<!-- Django messages -->
<!--<div class="row top-row">
        <div class="col-md-8">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}">
                        {{ message }}
                        
                    </div>

                {% endfor %}
            {% endif %}       
        </div>
    </div>-->


            <div class="row justify-content-around my-row top-row">
                <div class="col-12 my-col my-col-41 text-left">
                        
                    <div class="tabs">

                        <input type="radio" name="tabs" id="tabone" >
                            <label for="tabone" id="tab-heading-1">Friends</label>
                            <div class="tab">
                                <div class="right-sidebar">
                                    {% if friends %}                                       
                                        <div class="card-body">
                                        {% for user_p in friends %}
                                            <div class="card side-card">
                                            <a href="{{ user_p.get_absolute_url }}"> <img src="{{ user_p.image.url }}" class="friend-image" width="80" height="80" alt=""/></a>
                                            <a class="text-dark" href="{{ user_p.get_absolute_url }}">
                                            <b>{{ user_p }}</b></a>
                                            <small> <a class="btn btn-danger btn-sm del-btn" href="friend/delete/{{ user_p.id }}"> Delete </a>
                                            </small>
                                            </div>
                                        {% endfor %}
                                        </div>
                                    {% else %}
                                        <h3> Connect to people with similar reading taste, Just send a Request! </h3>
                                    {% endif %}   
                                </div>
                            </div>
  
                        <input type="radio" name="tabs" id="tabtwo" checked="checked">
                            <label for="tabtwo" id="tab-heading-2">Requests</label>
                            <div class="tab">

                            <div class="row justify-content-around my-row">

                                <div class="col-md-5">
                                    <div class="my-3">
                                    <div class="card-body">
                                        <h3>Recieved ({{ rec_friend_requests.count }})</h3>
                                        <hr class="my-4" />
                                        {% if not rec_friend_requests %}
                                        <h5><i>No recieved requests!</i></h5>
                                        {% else %} {% for r_request in rec_friend_requests %}
                                        <a href="{{ r_request.from_user.profile.get_absolute_url }}">
                                        <img class="suggest-image" src="{{ r_request.from_user.profile.image.url }}" class="rounded mr-4"  alt=""/></a>
                                        
                                        <a class="mr-2 text-dark align-middle" href="{{ r_request.from_user.profile.get_absolute_url }}"><b>
                                        {{ r_request.from_user.username }}</b> </a>
            
                                        <small class="float-right">
                                        
                                            <a class="btn btn-outline-success btn-sm rec-btn" href="/accounts/friend-request/accept/{{ r_request.from_user.id }}"> Accept </a>
                            
                                            <a class="btn btn-outline-danger btn-sm rec-btn" href="/accounts/friend-request/delete/{{ r_request.from_user.id }}" >Delete</a>
                                        
                                        </small> <br /><br />
                                        
                                        {% endfor %} {% endif %}
                                    </div>
                                    </div>
                                </div>



                                
                                <div class="col-md-5">
                                    <div class="my-3">
                                    <div class="card-body">
                                        <h3> Sent ({{ sent_friend_requests.count }})</h3>
                                        <hr class="my-4" />
                                        {% if not sent_friend_requests %}
                                        <h5><i>You have not requested anyone!</i></h5>
                                        {% else %} 
                                            {% for s_request in sent_friend_requests %}
                                        
                                                <a href="{{ s_request.to_user.profile.get_absolute_url }}">
                                                <img class="suggest-image" src="{{ s_request.to_user.profile.image.url }}" class="rounded mr-2" alt=""/></a>
                                        
                                                <a class="mr-2 align-middle text-dark" href="{{ s_request.to_user.profile.get_absolute_url }}"><b>
                                                {{ s_request.to_user.username }}</b> </a>
            
                                                <small class="float-right">

                                                    <a class="btn btn-outline-warning btn-sm rec-btn" href="/accounts/friend-request/cancel/{{ s_request.to_user.id }}/" > Cancel </a>
                                        
                                                </small> <br /><br />
                                        
                                            {% endfor %} 
                                        {% endif %}



                                    </div>
                                    </div>
                                </div>







                        </div> <!-- Request ROW END -->










                            </div> <!--Tab div -->
  
                    </div>
                </div>
            </div>









                <!--<div class="row justify-content-center my-row row-3">
                    <div class="col-12 my-col my-col-31 text-center">
                        <div>

                        {% if friends %}
                            <div class="card card-signin my-5">
                                <div class="card-body">
                                    {% for user_p in friends %}
                                        <a href="{{ user_p.get_absolute_url }}"> <img src="{{ user_p.image.url }}" class="rounded mr-2" width="40" height="40" alt=""/></a>
                                        <a class="text-dark" href="{{ user_p.get_absolute_url }}">
                                        <b>{{ user_p }}</b></a>
          
                                        <br /><br />
                                    {% endfor %}
                                </div>
                            </div>
                        {% else %}
                            <h3> Connect to people with similar reading taste, Just send
                            a Request! </h3>
                        {% endif %}
                    </div>
                    </div>        
                </div> -->

                    
{% endblock content %}
